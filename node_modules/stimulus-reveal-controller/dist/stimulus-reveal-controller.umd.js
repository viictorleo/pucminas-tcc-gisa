(function(u,o){typeof exports=="object"&&typeof module!="undefined"?module.exports=o():typeof define=="function"&&define.amd?define(o):(u=typeof globalThis!="undefined"?globalThis:u||self,u["stimulus-reveal-controller"]=o())})(this,function(){"use strict";function u(e){return e.replace(/(?:[_-])([a-z0-9])/g,(t,r)=>r.toUpperCase())}function o(e){return e.charAt(0).toUpperCase()+e.slice(1)}function w(e){return e.replace(/([A-Z])/g,(t,r)=>`-${r.toLowerCase()}`)}function h(e,t){const r=g(e);return Array.from(r.reduce((n,s)=>(O(s,t).forEach(i=>n.add(i)),n),new Set))}function j(e,t){return g(e).reduce((n,s)=>(n.push(...T(s,t)),n),[])}function g(e){const t=[];for(;e;)t.push(e),e=Object.getPrototypeOf(e);return t.reverse()}function O(e,t){const r=e[t];return Array.isArray(r)?r:[]}function T(e,t){const r=e[t];return r?Object.keys(r).map(n=>[n,r[n]]):[]}(()=>{function e(r){function n(){return Reflect.construct(r,arguments,new.target)}return n.prototype=Object.create(r.prototype,{constructor:{value:n}}),Reflect.setPrototypeOf(n,r),n}function t(){const n=e(function(){this.a.call(this)});return n.prototype.a=function(){},new n}try{return t(),e}catch{return n=>class extends n{}}})();function A(e){return h(e,"classes").reduce((r,n)=>Object.assign(r,$(n)),{})}function $(e){return{[`${e}Class`]:{get(){const{classes:t}=this;if(t.has(e))return t.get(e);{const r=t.getAttributeName(e);throw new Error(`Missing attribute "${r}"`)}}},[`${e}Classes`]:{get(){return this.classes.getAll(e)}},[`has${o(e)}Class`]:{get(){return this.classes.has(e)}}}}function C(e){return h(e,"targets").reduce((r,n)=>Object.assign(r,V(n)),{})}function V(e){return{[`${e}Target`]:{get(){const t=this.targets.find(e);if(t)return t;throw new Error(`Missing target element "${e}" for "${this.identifier}" controller`)}},[`${e}Targets`]:{get(){return this.targets.findAll(e)}},[`has${o(e)}Target`]:{get(){return this.targets.has(e)}}}}function E(e){const t=j(e,"values"),r={valueDescriptorMap:{get(){return t.reduce((n,s)=>{const i=p(s),a=this.data.getAttributeNameForKey(i.key);return Object.assign(n,{[a]:i})},{})}}};return t.reduce((n,s)=>Object.assign(n,v(s)),r)}function v(e){const t=p(e),{key:r,name:n,reader:s,writer:i}=t;return{[n]:{get(){const a=this.data.get(r);return a!==null?s(a):t.defaultValue},set(a){a===void 0?this.data.delete(r):this.data.set(r,i(a))}},[`has${o(n)}`]:{get(){return this.data.has(r)||t.hasCustomDefaultValue}}}}function p([e,t]){return P(e,t)}function l(e){switch(e){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function f(e){switch(typeof e){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}if(Array.isArray(e))return"array";if(Object.prototype.toString.call(e)==="[object Object]")return"object"}function x(e){const t=l(e.type);if(t){const r=f(e.default);if(t!==r)throw new Error(`Type "${t}" must match the type of the default value. Given default value: "${e.default}" as "${r}"`);return t}}function S(e){const t=x(e),r=f(e),n=l(e),s=t||r||n;if(s)return s;throw new Error(`Unknown value type "${e}"`)}function F(e){const t=l(e);if(t)return D[t];const r=e.default;return r!==void 0?r:e}function P(e,t){const r=`${w(e)}-value`,n=S(t);return{type:n,key:r,name:u(r),get defaultValue(){return F(t)},get hasCustomDefaultValue(){return f(t)!==void 0},reader:N[n],writer:b[n]||b.default}}const D={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},N={array(e){const t=JSON.parse(e);if(!Array.isArray(t))throw new TypeError("Expected array");return t},boolean(e){return!(e=="0"||e=="false")},number(e){return Number(e)},object(e){const t=JSON.parse(e);if(t===null||typeof t!="object"||Array.isArray(t))throw new TypeError("Expected object");return t},string(e){return e}},b={default:z,array:y,object:y};function y(e){return JSON.stringify(e)}function z(e){return`${e}`}class c{constructor(t){this.context=t}static get shouldLoad(){return!0}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(t,{target:r=this.element,detail:n={},prefix:s=this.identifier,bubbles:i=!0,cancelable:a=!0}={}){const B=s?`${s}:${t}`:t,m=new CustomEvent(B,{detail:n,bubbles:i,cancelable:a});return r.dispatchEvent(m),m}}c.blessings=[A,C,E],c.targets=[],c.values={};class d extends c{connect(){this.class=this.hasHiddenClass?this.hiddenClass:"hidden"}toggle(){this.itemTargets.forEach(t=>{t.classList.toggle(this.class)})}show(){this.itemTargets.forEach(t=>{t.classList.remove(this.class)})}hide(){this.itemTargets.forEach(t=>{t.classList.add(this.class)})}}return d.targets=["item"],d.classes=["hidden"],d});
